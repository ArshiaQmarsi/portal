"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[592],{2281:(c,o,i)=>{i.d(o,{m:()=>l});var l=(()=>{return(e=l||(l={}))[e.projectBase=1]="projectBase",e[e.Janbi=2]="Janbi",e[e.Asli=3]="Asli",l;var e})()},5352:(c,o,i)=>{i.d(o,{s:()=>g});var l=i(2340),e=i(4650),_=i(1305),d=i(4982),m=i(9078);let g=(()=>{class a{constructor(t,n){this._lightbox=t,this._uploadService=n,this.maxSize=100,this.isUploading=!1}ngOnChanges(t){this.src=l.N.url+"/api/v1/files/show/"+this.lastImageid}onSelectedFile(t){const n=t.target.files[0];this.isUploading=!0,this._uploadService.uploadFile(n,this.fileType,this.eventType).subscribe(s=>{this.fbContorl.setValue(s.entity.fileId),this.isUploading=!1,this.src=l.N.url+"/api/v1/files/show/"+this.fbContorl.value},()=>{this.isUploading=!1})}onOpenImage(t){this._lightbox.open([{src:t.target.src,thumb:""}])}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(_.ey),e.\u0275\u0275directiveInject(d.C))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-legecy-image-uploader"]],inputs:{maxSize:"maxSize",accept:"accept",fbContorl:"fbContorl",label:"label",lastImageid:"lastImageid",fileType:"fileType",eventType:"eventType"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:4,consts:[[1,"upload-btn-wrapper",3,"largeLoading"],[3,"textContent"],["type","file","name","myfile",3,"accept","change"],["onError","this.src= 'https://file.behroozbc.ir/no_logo.png'","alt","",3,"src","click"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"label",1),e.\u0275\u0275elementStart(2,"input",2),e.\u0275\u0275listener("change",function(r){return n.onSelectedFile(r)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"img",3),e.\u0275\u0275listener("click",function(r){return n.onOpenImage(r)}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("largeLoading",n.isUploading),e.\u0275\u0275advance(1),e.\u0275\u0275property("textContent",n.label),e.\u0275\u0275advance(1),e.\u0275\u0275property("accept",n.accept),e.\u0275\u0275advance(1),e.\u0275\u0275property("src",n.src,e.\u0275\u0275sanitizeUrl))},dependencies:[m.M],styles:["img[_ngcontent-%COMP%]{display:inline;max-width:3rem;float:left}div[_ngcontent-%COMP%]{display:inline}"]}),a})()}}]);